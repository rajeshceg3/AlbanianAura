#controls {
    padding: 10px;
    background-color: #f2e6ff; /* Pale Lavender */
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
#controls input, #controls select {
    margin-right: 10px; /* Consistent margin */
    margin-bottom: 5px; /* Add some bottom margin for stacked elements in mobile */
    padding: 8px 10px; /* Updated padding */
    border: 1px solid #d9d9d9; /* Light Grey border */
    border-radius: 5px; /* Softer corners */
    background-color: #fff; /* White background */
    transition: box-shadow 0.3s ease; /* Transition for focus */
}

#controls input:focus, #controls select:focus {
    box-shadow: 0 0 0 2px #ffd9b3; /* Soft Coral focus shadow */
    outline: none; /* Remove default outline */
}

#map {
    height: calc(100vh - 70px); /* Adjust map height considering controls, assuming controls are approx 50px + 2*10px padding */
    width: 100%;
}
body {
    margin: 0;
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-color: #e6fff2; /* Soft Mint */
    color: #4a4a4a; /* Dark Grey */
}
html, body { height: 100%; }

#itinerary {
    padding: 10px;
    background-color: #f2e6ff; /* Pale Lavender */
    margin-top: 10px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
#itinerary h2 {
    margin-top: 0;
    margin-bottom: 10px; /* Add some space below the heading */
    font-size: 1.3em; /* Ensure consistent font size */
}
#itineraryList {
    list-style-type: none;
    padding: 0;
}
#itineraryList li {
    padding: 10px; /* Increased padding */
    border-bottom: 1px solid #e0e0e0; /* Lighter grey border */
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #fff; /* White background for items */
}
#itineraryList li:last-child {
    border-bottom: none;
}
#itineraryList button {
    padding: 5px 10px; /* Updated padding */
    background-color: #ffb3b3; /* Softer pastel red */
    color: #fff; /* White text */
    border: none;
    cursor: pointer;
    border-radius: 5px; /* Softer corners */
    transition: background-color 0.3s ease;
}
#itineraryList button:hover {
    background-color: #ff9999; /* Darker pastel red on hover */
}

#itineraryNotification {
    margin-top: 10px;
    color: #d8000c; /* Error red */
    background-color: #ffdddd; /* Light red background */
    border: 1px solid #f44336; /* Red border */
    padding: 8px; /* Adjusted padding from inline to match other elements */
    border-radius: 4px; /* Adjusted border-radius */
    text-align: center;
    /* display: none; /* Managed by JS to show/hide */
}

#langSwitcher {
    margin-top: 5px;
    margin-bottom: 5px;
    padding: 5px;
    background-color: transparent; /* Remove specific background, rely on #controls */
    border-radius: 3px;
    text-align: right; /* Align to the right of the controls bar */
    padding: 0; /* Remove padding if not needed, or adjust */
}
#langSwitcher span {
    margin-right: 5px;
    vertical-align: middle; /* Align text nicely with buttons */
}
#langSwitcher button {
    padding: 5px 10px; /* Updated padding */
    cursor: pointer;
    border: 1px solid #d9d9d9; /* Light Grey border */
    background-color: #fff; /* White background */
    color: #4a4a4a; /* Dark Grey text */
    border-radius: 5px; /* Softer corners */
    margin-left: 5px; /* Add some space between buttons */
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}
#langSwitcher button:hover {
    background-color: #fff7f0; /* Lighter Soft Coral/Cream hover */
}
#langSwitcher button.activeLang { /* Style for the active language button */
    background-color: #ffd9b3; /* Soft Coral */
    color: #4a4a4a; /* Dark Grey text */
    border-color: #ffd9b3; /* Soft Coral border */
    /* Ensure transition applies to active state changes if any hover effects also apply here */
}

/* --- Responsive Design --- */

/* For smaller screens (e.g., mobile phones) */
@media (max-width: 600px) {
    #controls {
        padding: 8px; /* Slightly reduce padding */
    }

    #controls input,
    #controls select {
        display: block; /* Stack them vertically */
        width: calc(100% - 16px); /* Full width with some padding consideration */
        margin-bottom: 8px; /* Add space between stacked elements */
        margin-right: 0; /* Remove right margin */
    }

    #map {
        /* Adjust map height if controls height changes significantly.
           Assuming controls might now take up more vertical space when stacked.
           This value might need fine-tuning based on actual stacked height.
           The lang switcher might add a bit more height.
           Let's estimate a stacked controls height of around 160px now. */
        height: calc(100vh - 170px); /* Further adjust for lang switcher */
    }
    #langSwitcher {
        text-align: left; /* Align to left on mobile when controls stack */
        margin-top: 10px;
    }

    #itinerary h2 {
        font-size: 1.2em; /* Adjust heading size */
    }

    body {
        font-size: 0.95em; /* Slightly adjust base font size for small screens */
    }

    /* Ensure popups are not too wide */
    .leaflet-popup-content-wrapper {
        max-width: 80vw; /* Max width relative to viewport width */
    }
}

/* For very small screens, further adjustments if needed */
@media (max-width: 400px) {
    #controls input,
    #controls select {
        padding: 8px 5px; /* Adjust padding for very small inputs */
    }
     /* Re-evaluate map height for very small screens if controls take more space */
    #map {
         height: calc(100vh - 180px); /* Potentially adjust if controls take even more space */
    }
}

/* --- Leaflet Popup Styling --- */
.leaflet-popup-content-wrapper {
    background-color: #fff; /* White background for popup */
    color: #4a4a4a; /* Dark Grey text */
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.15);
}

.leaflet-popup-content {
    margin: 15px; /* Ensure adequate padding inside the popup */
}

.leaflet-popup-content h3 {
    color: #4a4a4a;
    font-size: 1.15em; /* Slightly larger for title */
    margin-top: 0; /* Remove default top margin if any */
    margin-bottom: 10px; /* Space below title */
}

.leaflet-popup-content p {
    line-height: 1.6; /* Improve readability */
    margin-bottom: 10px; /* Space between paragraphs or elements */
}
.leaflet-popup-content p:last-child {
    margin-bottom: 0; /* No margin for the last paragraph */
}

.leaflet-popup-content a {
    color: #ff8c66; /* Saturated Soft Coral for links */
    text-decoration: none;
}
.leaflet-popup-content a:hover {
    text-decoration: underline;
}

.leaflet-popup-tip {
    background-color: #fff; /* Match popup body */
}

/* Adjust close button color if needed to fit the new theme */
.leaflet-popup-close-button {
    color: #777 !important; /* Important to override Leaflet's inline styles if necessary */
}
.leaflet-popup-close-button:hover {
    color: #555 !important;
}

/* "Add to Itinerary" Button in Popup */
.addToItineraryBtn {
    background-color: #ffd9b3; /* Soft Coral */
    color: #4a4a4a; /* Dark Grey text */
    border: 1px solid #ffc8a3; /* Darker Soft Coral border */
    padding: 8px 12px;
    border-radius: 5px;
    margin-top: 10px; /* Space above the button */
    cursor: pointer;
    display: inline-block; /* Ensure proper block-like behavior */
    text-align: center;
    width: calc(100% - 24px); /* Make it full width minus padding */
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}
.addToItineraryBtn:hover {
    background-color: #ffc8a3; /* Darker Soft Coral on hover */
}
